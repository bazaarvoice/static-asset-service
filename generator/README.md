# Generator

The generator is used to create static resources so they can be consumed by the
[static asset loader client][1].

## Basic Usage

```js
var generator = require('static-asset-service');

var promise = generator({
  // The namespace that apps consuming these generated assets will use.
  namespaceName: 'BV',

  // The directory where the generator can expect to find the asset files.
  sourceDir: '/some/path/assets',

  // The destination where the assets will be created.
  targetDir: '/some/path/dist',

  // List the asset bundles that need to be supported for each application using
  // this service. The generator will only generate combination files for these
  // listed assets.
  //
  // We constrain the asset generation in this way for combinatorial reasons -
  // creating static combinations gets large rapidly. Ten assets combine to
  // more than 1000 files even with alphanumeric ordering of names enforced, but
  // four or less is managable.
  //
  // Each asset must have a corresponding file in the assets directory. For
  // example, for the asset jquery-bv@1.11.1, there must be a file
  // assets/jquery-bv/1.11.1.js.
  //
  // IMPORTANT: assets MUST be listed in dependency order, i.e. the order in
  // which they must load to satisfy one another.
  assetBundles: {
    firebird: [
      'jquery-bv@1.11.1',
      'lodash-bv@1.2.0',
      'backbone-bv@1.0.0'
    ],
    curations: [
      'jquery-bv@1.11.1',
      'underscore@1.5.2'
    ],
    spotlights: [
      'lodash@2.4.1',
      'backbone-bv@1.2.0'
    ]
  }
});
```

### About the Namespace

The static asset service requires a global namespace - that is, a property on
`window` - that it can use to communicate back to the apps that request assets.
When generating files, this namespace needs to be known in order to properly
provide the individual assets to the requesting application.

In browser applications, the namespace is generated by the
[bv-ui-core namespacer][2] module.

[1]: https://github.com/bazaarvoice/bv-ui-core/tree/master/lib/staticAssetLoader
[2]: https://github.com/bazaarvoice/bv-ui-core/tree/master/lib/namespacer
